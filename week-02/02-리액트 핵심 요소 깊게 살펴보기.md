02장 리액트 핵심 요소 깊게 살펴보기
===========================

2.1 JSX란?
---------

JSX는 XML과 유사한 내장형 구문이다. JSX는 트랜스파일을 거쳐야 자바스크립트 코드로 변환된다.
**JSX의 목표**: JSX 내부에 트리 구조로 작성 > 트랜스파일 > 자바스크립트가 이해할 수 있는 코드로 변경


### 2.1.1. JSX의 정의 

JSX는 4가지 컴포넌트를 기반으로 구성

1. **JSXElement**: JSX의 가장 기본 요소
   
   - `JSXOpeningElement`: 시작 시 JSXClosingElement와 동일 요소로 같은 단계에 선언되어야 함
   - `JSXClosingElement`: JSXOpeningElement가 종료되었음을 알리는 요소
   - `JSXSelfClosingElement`: 요소가 시작되고, 스스로 종료되는 형태
   - `JSXFragment`: 아무런 요소가 없는 형태
  
2. **JSXElementName**: JSXElement의 요소 이름으로 쓸 수 있는 것

   - `JSXIdentifier`: JSX 내부에서 사용할 수 있는 식별자로 자바스크립트 식별자 규칙과 동일

       ```javascript
       function Valid1() {
         return <$></$>
       }
       ```
   - `JSXNameSpacedName`: JSXIdentifier:JSXIdentifier의 조합으로 한 개만 묶을 수 있다.

       ```javascript
       function valid() {
         return <foo:bar></foo:bar>
       }
       ```
   - `JSXMemberExpression`: JSXIdentifier.JSXIdentifier의 조합으로 여러 개를 묶을 수 있다.

       ```javascript
       function valid() {
         return <foo.bar.baz></foo.bar.baz>
       }
       ```

3. **JSXAttributes**: JSXElement에 부여할 수 있는 속성(필수값 X)

     - `JSXSpreadAttributes`: 자바스크립트의 전개 연산자와 동일한 역할
     - `JSXAttribute`: 속성을 나타내는 키와 값
       
         - JSXAttributeName: 속성의 키 값, JSXIdentifier와 JSXNamespacedName 가능
         - JSXAttributeValue: 키에 할당할 수 있는 값, "", '', {AssignmentExpression}, JSXElement, JSXFragment 중 하나를 만족해야 한다.
      
4. **JSXChildren**: JSXElement의 자식 값

   JSXChild는 JSXChildren을 이루는 기본 단위
   
   - JSXText: {, <, >, }을 제외한 문자열
   - JSXElement
   - JSXFragment
   - { JSXChildExpression (optional) }
     
       ```javascript
       export default function App() {
         return <>{(() => 'foo')}</>
       }
       ```

5. **JSXStrings**

   HTML에서 사용 가능한 문자열은 JSXStrings에서 사용 가능하다. 자바스크립트와의 차이점은 `\`을 제약 없이 사용할 수 있다는 것이다.

### 2.1.2 JSX 예제

```javascript
const ComponentF = (
  <A required={true}>
    <B text="리액트" />
  </A>
)

// JSXElement: '<A required={true}> <B text="리액트" /> </A>'
// JSXElementName: 'A', 'B'
// JSXAttributes: 'required={true}', 'text="리액트"'
// JSXChildren: '<B text="리액트" />'
```

### 2.1.3 JSX는 어떻게 자바스크립트에서 변환될까?

  - JSXElement를 첫 번째 인수로 선언해 요소를 정의
  - JSXChildren, JSXAttributes, JSXStrings는 이후 인수로 넘겨 처리

  ```javascript
    // JSX 코드
    const Component = <A required={true}>Hello World</A>

    // 변환 결과
    var Component = React.createElement(
      A,
      {
        required: true,
      },
      'Hello World',
    )
    // React.createElement(JSXElementName, {JSXAttributes}, JSXStrings) 순서로 처리
  ```

2.2 가상 DOM과 리액트 파이버
-----------------------

리액트의 특징 중 하나는 가상 DOM을 운영한다는 것이다.

### 2.2.1 DOM과 브라우저 렌더링 과정

`DOM`: 웹페이지에 대한 인터페이스 (브라우저가 웹페이지의 콘텐츠와 구조를 어떻게 보여줄지에 대한 정보를 담고 있다.) <br /><br />
DOM과 CSSOM으로 렌더링 트리가 만들어지는 과정
![image](https://web.dev/static/articles/critical-rendering-path/render-tree-construction/image/dom-cssom-are-combined-8de5805b2061e_1920.png?hl=ko)


### 2.2.2 가상 DOM의 탄생 배경

- 브라우저가 웹페이지를 렌더링하는 과정은 복잡하고 많은 비용이 든다.
- 렌더링 완료 후에도 사용자의 인터랙션으로 웹페이지가 변경되는 상황을 고려해야 한다.
- 싱글 페이지 애플리케이션에서는 계속해서 요소의 위치를 재계산하기 때문에 DOM을 관리하는 과정에서 비용 부담이 커진다.

  ➡ 가상 DOM의 탄생
     - 웹페이지가 표시해야 할 DOM을 메모리에 저장하고 리액트에서 변경에 대한 준비가 완료됐을 때 실제 DOM에 반영
     - 렌더링 과정을 최소화
 
### 2.2.3 가상 DOM을 위한 아키텍처, 리액트 파이버

리액트 파이버를 통해 가상 DOM과 렌더링 과정 최적화

1. **리액트 파이버란?**
   리액트에서 관리하는 자바스크립트 객체
   
